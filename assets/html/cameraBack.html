<!DOCTYPE html>
<html>

<head>
    <script async src="https://unpkg.com/es-module-shims@1.7.2/dist/es-module-shims.js"></script>
    <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.153.0/build/three.module.js"
      }
    }
  </script>
    <style>
        body {
            margin: 0;
        }

        #backupImage {
            width: 100%;
            height: auto;
            position: absolute;
            top: 0;
            left: 0;
            display: none; /* Inicialmente oculto */
        }

        #videoContainer {
            width: 100vw;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <div id="videoContainer"></div>
    <img id="backupImage" src="https://via.placeholder.com/720x1280" />

    <script type="module">
        import * as THREE from 'three';

        const videoContainer = document.getElementById('videoContainer');
        const backupImage = document.getElementById('backupImage');

        const startCamera = async () => {
            try {
                const videoStream = await navigator.mediaDevices.getUserMedia({
                    video: { facingMode: "environment" } // Solicita la cÃ¡mara trasera
                });

                const videoElement = document.createElement('video');
                videoElement.srcObject = videoStream;
                videoElement.muted = true; // Silencia el video
                videoElement.play();
                videoContainer.appendChild(videoElement);
            } catch (error) {
                console.error('Error accessing media devices.', error);
                displayBackupImage(); // Muestra la imagen de respaldo si hay un error
            }
        };

        const displayBackupImage = () => {
            console.log('Mostrando imagen de respaldo');
            backupImage.style.display = 'block';
        };

        startCamera();
    </script>

</body>

</html>
